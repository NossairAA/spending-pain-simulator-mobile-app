# MindSpend Mobile App

MindSpend is a Flutter app that helps users understand the real-life cost of impulse purchases before buying.
Instead of showing only a price tag, it converts a purchase into time, budget impact, and future tradeoffs.

## Why MindSpend

MindSpend is built around one idea: spending decisions become clearer when money is translated into lived time and personal priorities.

For each purchase, the app can estimate things like:
- work time required to pay for it
- emergency buffer impact
- monthly expense impact
- contextual insights to reduce emotional/impulsive spending

## Core Features

- Email + password authentication (Firebase Auth)
- Google sign-in
- Email verification flow
- Guest mode (no account required)
- Onboarding/profile setup (income mode, monthly expenses, work days)
- Purchase check flow with cool-off and result screens
- Purchase history storage
  - Firestore for authenticated users
  - SharedPreferences for guest users
- Insights screen for recent activity and spending patterns
- Profile, settings, and goals screens
- Adaptive Android icon + iOS icon assets with MindSpend branding

## Tech Stack

- Flutter (Material 3)
- Riverpod (state management)
- GoRouter (navigation and auth-aware redirects)
- Firebase
  - `firebase_core`
  - `firebase_auth`
  - `cloud_firestore`
  - `google_sign_in`
- Local persistence via `shared_preferences`

## Project Structure

Repository root contains the Flutter app under `mobile-app/`.

```text
spending-pain-simulator-mobile-app/
  mobile-app/
    lib/
      app/               # router + app wiring
      features/          # UI screens and feature modules
      models/            # typed domain models
      providers/         # Riverpod providers/notifiers
      services/          # auth + purchase persistence
      theme/             # color system + typography
      utils/             # spending calculation logic
    android/
    ios/
    test/
```

## Main User Flow

1. Welcome screen
2. Auth (or continue as guest)
3. Email verification (if needed)
4. Profile setup (if profile missing)
5. Home shell with tabs:
   - Insights
   - Check (purchase input)
   - Profile
6. Cool-off screen
7. Results and decision logging

Routing and guard logic lives in `mobile-app/lib/app/router.dart`.

## Calculation Model

Spending conversion utilities are implemented in `mobile-app/lib/utils/calculations.dart`.

Examples:
- `timeInMinutes = (price / hourlyWage) * 60`
- `emergencyBufferDays = price / (monthlyExpenses / 30)`
- `monthsOfExpenses = price / monthlyExpenses`
- Additional utility formatting for human-readable time and recency

## Prerequisites

Before running locally, install:

- Flutter SDK (stable)
- Dart SDK (comes with Flutter)
- Android Studio + Android SDK (for Android)
- Xcode + CocoaPods (for iOS/macOS)
- Firebase project (Auth + Firestore enabled)

## Local Setup

From repo root:

```bash
cd mobile-app
flutter pub get
flutter run
```

## Firebase Setup Notes

Firebase platform config files are intentionally git-ignored and must be provided locally:
- `mobile-app/android/app/google-services.json`
- `mobile-app/ios/Runner/GoogleService-Info.plist`

`mobile-app/lib/firebase_options.dart` is generated by FlutterFire and can stay in source control.

If you need to connect to a different Firebase project, run FlutterFire config and place the generated platform files in the paths above.

## Build Commands

Inside `mobile-app/`:

```bash
# Analyze
flutter analyze

# Run tests
flutter test

# Android release APK
flutter build apk --release

# iOS release (macOS only)
flutter build ios --release
```

## iOS / CocoaPods Warning (Common)

If you see a warning like:

> CocoaPods did not set the base configuration ... include Pods-Runner.profile.xcconfig in Release.xcconfig

make sure these includes exist:
- `mobile-app/ios/Flutter/Debug.xcconfig`
- `mobile-app/ios/Flutter/Release.xcconfig`

Then run:

```bash
cd mobile-app
flutter clean
flutter pub get
flutter build ios
```

## App Naming and Icons

- Android display label is set in `mobile-app/android/app/src/main/AndroidManifest.xml`
- iOS display name is set in `mobile-app/ios/Runner/Info.plist`
- Launcher icons are generated via `flutter_launcher_icons` config in `mobile-app/pubspec.yaml`

## Contributing

1. Create a branch from `main`
2. Make your changes
3. Run `flutter analyze` and `flutter test`
4. Open a PR with a clear description of behavior changes

## License

No license file is currently defined in this repository.
